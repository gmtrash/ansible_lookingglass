---
# Ansible Inventory for Looking Glass VFIO Setup
# Edit this file with your host information

all:
  hosts:
    vfio-host:
      ansible_host: localhost
      ansible_connection: local

      # System Configuration
      host_username: "{{ lookup('env', 'USER') }}"

      # VM Configuration
      vm_name: win11
      vm_memory_gb: 16
      vm_vcpus: 12

      # CPU Configuration
      # Intel 12700KF example: 12 cores (0-11), 8 E-cores (12-19)
      # Pass performance cores to VM, keep efficiency cores for host
      vm_cpu_cores: "0-11"
      host_cpu_cores: "12-19"
      all_cpu_cores: "0-19"

      # Topology for VM (adjust based on your CPU)
      vm_cpu_sockets: 1
      vm_cpu_dies: 1
      vm_cpu_cores_per_die: 6
      vm_cpu_threads: 2

      # Memory Configuration
      enable_hugepages: true
      # Calculate: (vm_memory_gb * 1024) / 2
      hugepages_count: 8192

      # GPU Configuration
      # Find with: lspci -nn | grep -i vga
      gpu_pci_video: "0000:06:00.0"
      gpu_pci_audio: "0000:06:00.1"

      # Additional PCI devices to pass through
      additional_pci_devices: []
        # - "0000:04:00.0"  # Example: USB controller

      # Network Configuration
      bridge_name: br0
      bridge_interface: enp6s0

      # Looking Glass Configuration
      looking_glass_size_mb: 256  # 32=1080p, 64=1440p, 128=4K, 256=4K HDR
      use_kvmfr_module: false      # true for /dev/kvmfr0, false for libvirt shmem

      # Performance Options
      enable_performance_tweaks: true
      enable_cpu_governor: false

      # Storage Configuration
      vm_disk_path: "/var/lib/libvirt/images/win11.qcow2"
      vm_disk_size: "120G"

      # Additional disks to pass through
      passthrough_disks: []
        # - device: /dev/disk/by-id/ata-Samsung_SSD_960_EVO_250GB_XXXXX
        #   bus: sata
        #   target: sdb

      # USB Devices to pass through (find with: lsusb)
      passthrough_usb_devices: []
        # - vendor: "0x1b1c"
        #   product: "0x0c09"
        #   description: "Corsair Audio Device"

      # Input Configuration (for evdev passthrough)
      passthrough_keyboard: "/dev/input/by-id/usb-YOUR_KEYBOARD-event-kbd"
      passthrough_mouse: "/dev/input/by-id/usb-YOUR_MOUSE-event-mouse"
