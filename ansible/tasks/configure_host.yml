---
# Configure Host - Verify system settings (actual config done in setup.sh)

- name: Calculate hugepages count
  set_fact:
    hugepages_needed: "{{ (vm_memory_gb | int * 1024 / 2) | int }}"

- name: Verify hugepages allocation
  shell: cat /proc/sys/vm/nr_hugepages
  register: hugepages_actual
  changed_when: false

- name: Display hugepages status
  debug:
    msg: "Hugepages: {{ hugepages_actual.stdout }} / {{ hugepages_needed }} ({{ '✓ OK' if hugepages_actual.stdout | int >= hugepages_needed | int else '⚠ Insufficient - run setup.sh to configure' }})"
