#!/bin/bash
# VFIO Configuration - Auto-generated by Ansible
# Generated: {{ ansible_date_time.iso8601 }}

# VM Configuration
VM_NAME="{{ vm_name }}"
VM_XML_FILE="{{ vm_name }}.xml"

# CPU Configuration
HOST_PINNED_CPUS="{{ host_cpu_cores }}"
ALL_CPUS="{{ all_cpu_cores }}"

# Memory Configuration
ENABLE_HUGEPAGES={{ enable_hugepages | default(false) | lower }}
HUGEPAGES_COUNT={{ hugepages_count | default(8192) }}

# Performance Optimizations
ENABLE_PERFORMANCE_TWEAKS={{ enable_performance_tweaks | default(true) | lower }}
ENABLE_CPU_GOVERNOR={{ enable_cpu_governor | default(false) | lower }}
VM_CPU_GOVERNOR="max"

# Looking Glass Configuration
{% if use_kvmfr_module | default(false) %}
LOOKING_GLASS_DEVICE="/dev/kvmfr0"
{% else %}
LOOKING_GLASS_DEVICE="/dev/shm/looking-glass"
{% endif %}
LOOKING_GLASS_SIZE={{ looking_glass_size_mb | default(256) }}

# Network Configuration
BRIDGE_INTERFACE="{{ bridge_name | default('br0') }}"
PHYSICAL_INTERFACE="{{ bridge_interface | default('enp6s0') }}"

# GPU Passthrough Configuration
GPU_VIDEO_ADDRESS="{{ gpu_pci_video }}"
GPU_AUDIO_ADDRESS="{{ gpu_pci_audio }}"

# Logging
VFIO_LOGFILE="/var/log/libvirt/vfio.log"
DEBUG_LOGGING=false
